---
title: Next.js ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2íƒ„ (í´ë” êµ¬ì¡°, í¬ìŠ¤íŒ… ê´€ë¦¬)
publishedAt: '2023-10-13'
summary: í´ë” êµ¬ì¡°ì™€ Contentlayerë¥¼ í™œìš©í•œ í¬ìŠ¤íŒ… ê´€ë¦¬
category: Dev
---

<p align='center'>
  <img src='/blog/img/blog-main.png' width={500} alt='object-null' />
</p>

## ê°œìš”

ì•ì„  í¬ìŠ¤íŠ¸ì—ì„œëŠ” ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ ë•Œ ì±„íƒí•œ ê¸°ìˆ ê³¼ ì´ìœ ì— ëŒ€í•´ ë‹¤ë¤˜ìœ¼ë©°, ê·¸ ê¸€ì„ í† ëŒ€ë¡œ ê°œë°œ ê³¼ì •ì„ ê³µìœ í•©ë‹ˆë‹¤.

## í´ë” êµ¬ì¡°

íšŒì‚¬ì—ì„œ ì»´í¬ë„ŒíŠ¸ ì¬ì‚¬ìš©ê³¼ ë¶„ê¸° ì²˜ë¦¬ ê´€ë ¨í•´ì„œ ë‹¤ì–‘í•œ ì´ìŠˆë¥¼ ê²½í—˜í–ˆê¸° ë•Œë¬¸ì—, ì²˜ìŒ ì„¤ê³„ê³¼ì •ì— ì‹œê°„ì„ ë§ì´ íˆ¬ìí–ˆìŠµë‹ˆë‹¤.

### View(UI)ì™€ ë¡œì§ ë¶„ë¦¬

ì´ì œëŠ” ë„ˆë¬´ë‚˜ ìì—°ìŠ¤ëŸ½ê³  ë‹¹ì—°í•œ ìŠµê´€ì…ë‹ˆë‹¤.
**View**ì™€ **ë¡œì§**ì„ ëª…í™•í•˜ê²Œ ë¶„ë¦¬í–ˆê³ , ë¡œì§ì€ `service` í´ë” ì•ˆì—ì„œ ì „ë¶€ ì²˜ë¦¬í–ˆìŠµë‹ˆë‹¤.
ê´€ì‹¬ì‚¬ ë¶„ë¦¬ë¥¼ í†µí•´ Viewì™€ ë¡œì§ ê°ê°ì— ì§‘ì¤‘í•´ì„œ ê°œë°œí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, ìœ ì§€ë³´ìˆ˜ ë¹„ìš©ì„ ë‚®ì¶”ê³  ê°€ë…ì„±ê¹Œì§€ ì¡ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx title="page.tsx/[slug]" {4, 13, 35, 65}
import { Metadata } from 'next';
import PostNavigator from '@/src/components/PostNavigator';
import Mdx from 'src/components/Mdx';
import { getAllPosts, getPostData } from 'src/service/post';

export async function generateMetadata({
  params: { slug },
}: Props): Promise<Metadata> {
  const {
    title,
    summary: description,
    publishedAt: publishedTime,
  } = await getPostData(slug);

  return {
    title,
    description,
    openGraph: {
      title: { absolute: title },
      description,
      type: 'article',
      publishedTime,
      url: `https://river-dev.vercel.app/posts/${slug}`,
    },
  };
}

type Props = {
  params: {
    slug: string;
  };
};

export default async function PostPage({ params: { slug } }: Props) {
  const post = await getPostData(slug);
  const { title, summary, publishedAt, body, next, prev } = post;

  return (
    <article>
      <div className='flex flex-col border-b mb-6'>
        <h1 className='text-3xl font-bold tracking-tighter max-w-full'>
          {title}
        </h1>
        <div className='flex justify-between items-center mt-2 mb-6 text-sm max-w-full'>
          <p className='text-xl text-neutral-600 dark:text-neutral-400'>
            {summary}
          </p>
          <p className='text-neutral-600 dark:text-neutral-400'>
            {publishedAt}
          </p>
        </div>
      </div>

      <Mdx code={body.code} />

      <section className='hidden sm:flex items-center justify-between mt-16'>
        {prev && <PostNavigator post={prev} type='prev' />}
        {next && <PostNavigator post={next} type='next' />}
      </section>
    </article>
  );
}

export async function generateStaticParams() {
  const posts = await getAllPosts();
  return posts.map((post) => ({
    slug: post.slug,
  }));
}
```

### Components ê´€ë¦¬

ë¸”ë¡œê·¸ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì°¾ì•„ë³¼ ë•Œ í•˜ë“œì½”ë”©ìœ¼ë¡œ ì´ë ¥ì„œ ë‚´ìš©ì„ ì‘ì„±í•œ ë¸”ë¡œê·¸ê°€ ë§ì´ ë³´ì˜€ì§€ë§Œ,
ì €ëŠ” íš¨ìœ¨ì ì¸ ê´€ë¦¬ë¥¼ ìœ„í•´ `about` í´ë”ë‚´ì— `about` í˜ì´ì§€ì—ì„œë§Œ ì‚¬ìš©í•˜ëŠ” `component`ë¥¼ ë”°ë¡œ ê´€ë¦¬í–ˆìŠµë‹ˆë‹¤.<br/>

ê·¸ ì•ˆì— ì£¼ì œ ë³„ë¡œ(Intro, Careers..) êµ¬ë¶„í•´ ì»´í¬ë„ŒíŠ¸ë¥¼ êµ¬ì„±í–ˆê³ , ì´ë ¥ì„œ ê´€ë ¨ **ìƒìˆ˜ë°ì´í„°**ëŠ” `constants` í´ë”ì—ì„œ ë”°ë¡œ ê´€ë¦¬í–ˆê¸°ì— íš¨ìœ¨ì ìœ¼ë¡œ ìˆ˜ì •ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

```tsx
ğŸ“¦src
 â”£ ğŸ“‚app
 â”ƒ â”£ ğŸ“‚about
 â”ƒ â”ƒ â”£ ğŸ“‚components
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“œCareers.tsx
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“œEducation.tsx
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“œFnF.tsx
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“œIntro.tsx
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“œMeitalk.tsx
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“œOtherCareers.tsx
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“œProjects.tsx
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“œRiverBlog.tsx
 â”ƒ â”ƒ â”ƒ â”— ğŸ“œSkills.tsx
 â”ƒ â”ƒ â”— ğŸ“œpage.tsx
 // ...
  â”£ ğŸ“‚constants
 â”ƒ â”£ ğŸ“œCareersData.ts
 â”ƒ â”£ ğŸ“œEducationData.ts
 â”ƒ â”£ ğŸ“œFnF.ts
 â”ƒ â”£ ğŸ“œIntroData.tsx
 â”ƒ â”£ ğŸ“œMeitalk.ts
 â”ƒ â”£ ğŸ“œOtherCareersData.ts
 â”ƒ â”— ğŸ“œRiverBlog.ts
```

`about` í˜ì´ì§€ ì™¸ ë‚˜ë¨¸ì§€ í˜ì´ì§€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ëŠ” srcí´ë”ì˜ `components` í´ë”ì—ì„œ ê´€ë¦¬í•˜ë©°, íŒŒì¼ëª…ê³¼ ê°™ì´ **ëª…í™•í•œ ì—­í• ì„ ìˆ˜í–‰**í•˜ë„ë¡ ê°œë°œí–ˆìŠµë‹ˆë‹¤.

```tsx
ğŸ“¦components
 â”£ ğŸ“‚ui
 â”ƒ â”— ğŸ“‚icons
 â”ƒ â”ƒ â”£ ğŸ“œArrowLeftIcon.tsx
 â”ƒ â”ƒ â”£ ğŸ“œArrowRightIcon.tsx
 â”ƒ â”ƒ â”£ ğŸ“œGithubFillIcon.tsx
 â”ƒ â”ƒ â”£ ğŸ“œGithubIcon.tsx
 â”ƒ â”ƒ â”£ ğŸ“œHomeFillIcon.tsx
 â”ƒ â”ƒ â”£ ğŸ“œHomeIcon.tsx
 â”ƒ â”ƒ â”£ ğŸ“œMailFillIcon.tsx
 â”ƒ â”ƒ â”£ ğŸ“œMailIcon.tsx
 â”ƒ â”ƒ â”£ ğŸ“œMeFillIcon.tsx
 â”ƒ â”ƒ â”£ ğŸ“œMeIcon.tsx
 â”ƒ â”ƒ â”£ ğŸ“œMoonIcon.tsx
 â”ƒ â”ƒ â”£ ğŸ“œPostFillIcon.tsx
 â”ƒ â”ƒ â”£ ğŸ“œPostIcon.tsx
 â”ƒ â”ƒ â”— ğŸ“œSunIcon.tsx
 â”£ ğŸ“œCarouselCard.tsx
 â”£ ğŸ“œCarouselPosts.tsx
 â”£ ğŸ“œCategories.tsx
 â”£ ğŸ“œCustomArrow.tsx
 â”£ ğŸ“œFilterablePost.tsx
 â”£ ğŸ“œFooter.tsx
 â”£ ğŸ“œGoogleAnalytics.tsx
 â”£ ğŸ“œMainAboutMe.tsx
 â”£ ğŸ“œMdx.tsx
 â”£ ğŸ“œMultiCarousel.tsx
 â”£ ğŸ“œNavbar.tsx
 â”£ ğŸ“œPostCard.tsx
 â”£ ğŸ“œPostNavigator.tsx
 â”£ ğŸ“œProvider.tsx
 â”£ ğŸ“œThemeSwitch.tsx
 â”— ğŸ“œanalytics.tsx
```

ë¸”ë¡œê·¸ì—ì„œ ë‹¤ì–‘í•œ **icon**ë“¤ì„ ì‚¬ìš©í•˜ëŠ”ë°, í™”ë©´ë§ˆë‹¤ ë””ìì¸ê³¼ ê¸°ëŠ¥ì´ ë‹¬ë¼ì§€ë¯€ë¡œ `ui` í´ë”ì—ì„œ í•¨ìˆ˜ë¡œ ê´€ë¦¬í–ˆìŠµë‹ˆë‹¤.

```tsx title="GithubIcon.tsx/ui"
import { VscGithubInverted } from 'react-icons/vsc';

export default function GithubIcon({ type }: { type?: string }) {
  return type === 'me' ? (
    <VscGithubInverted className='w-5 h-5' />
  ) : (
    <VscGithubInverted className='w-6 h-6' />
  );
}
```

## Contentlayerë¥¼ í™œìš©í•œ í¬ìŠ¤íŒ… ê´€ë¦¬

**mdx íŒŒì¼**ì„ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ `Contentlayer`ë¥¼ í™œìš©í–ˆìŠµë‹ˆë‹¤.<br/>
`Contentlayer`ëŠ” ë§ˆí¬ë‹¤ìš´ íŒŒì¼ì´ë‚˜ ë‹¤ë¥¸ ë°ì´í„° ì†ŒìŠ¤ì—ì„œ ì»¨í…ì¸ ë¥¼ ê°€ì ¸ì™€ `Next.js` ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì‰½ê²Œ í†µí•©í•  ìˆ˜ ìˆìœ¼ë©°,
**type-safe**í•œ JSON ë°ì´í„°ë¡œ ë³€í™˜í•´ ì£¼ê³  ì»¨í…ì¸ ë¥¼ ê´€ë¦¬í•´ ì£¼ëŠ” SDKì…ë‹ˆë‹¤.

`contentlayer`ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ëª‡ê°€ì§€ ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.

1. **contnetlayer** ì„¤ì¹˜

```tsx
npm install next-contentlayer
```

2. **next.config.js** ìˆ˜ì •

`Next.js` ì „ìš© contentlayer í”Œë¡œê·¸ì¸ì„ ë“±ë¡í•©ë‹ˆë‹¤.

```tsx
const { withContentlayer } = require('next-contentlayer');
/** @type {import('next').NextConfig} */

const nextConfig = {};

module.exports = withContentlayer(nextConfig);
```

3. **tsconfig.json**ìˆ˜ì •

`import` ê²½ë¡œì˜ aliasë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.

> âœ¨ **.contentlayer**í´ë”ëŠ” ê°œë°œ ì„œë²„ ì‹¤í–‰ í˜¹ì€ ì¬ì‹¤í–‰ í•  ê²½ìš° í´ë”ê°€ ìƒì„±ë©ë‹ˆë‹¤.

```tsx title="tsconfig.json" {7, 12}
{
  "compilerOptions": {
    // ...
    "baseUrl": ".",
    "paths": {
      "@/*": ["./*"],
      "contentlayer/generated": ["./.contentlayer/generated"]
    }
  },
  "include": [
    // ...
    ".contentlayer/generated"
  ],
  "exclude": ["node_modules"]
}
```

4. **contentlayer.config.ts** ìƒì„±

í”„ë¡œì íŠ¸ Root ê²½ë¡œì— `contentlayer.config.ts` íŒŒì¼ì„ ë§Œë“¤ê³  `schema`ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
ì„¤ì • ëœ schemaì— ë”°ë¼ í¬ìŠ¤íŠ¸ë“¤ì´ ê°œë³„ ë°ì´í„°ë¡œ ë³€í™˜ë˜ë©°, ì´ ë°ì´í„°ë“¤ì„ ì»´í¬ë„ŒíŠ¸ ì•ˆì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

`defineDocumentType` APIë¥¼ ì´ìš©í•´ mdx íŒŒì¼ì˜ ì†ì„±ê³¼ í•„ë“œë¥¼ ì •ì˜í•©ë‹ˆë‹¤.

```tsx title="contentlayer.config.ts"
import {
  ComputedFields,
  defineDocumentType,
  makeSource,
} from 'contentlayer/source-files';

export const Post = defineDocumentType(() => ({
  name: 'Post',
  filePathPattern: `**/*.mdx`,
  contentType: 'mdx',
  fields: {
    title: {
      type: 'string',
      required: true,
    },
    publishedAt: {
      type: 'string',
      required: true,
    },
    summary: {
      type: 'string',
      required: true,
    },
    category: {
      type: 'string',
      required: true,
    },
    image: {
      type: 'string',
    },
  },
  computedFields,
}));
```

- **name**: í•„ìˆ˜ ì˜µì…˜ìœ¼ë¡œ ì •ì˜ëœ nameìœ¼ë¡œ íƒ€ì…ê³¼ ë°ì´í„°ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
- **filePathPattern**: mdx íŒŒì¼ê²½ë¡œ íŒ¨í„´ì…ë‹ˆë‹¤.
- **contentType**: í¬ìŠ¤íŠ¸ì˜ íƒ€ì…ì„ ì§€ì •í•©ë‹ˆë‹¤.
- **computedFields**: content sourceë¡œë¶€í„° ì§ì ‘ ì½ëŠ”ëŒ€ì‹  ë¯¸ë¦¬ ê³„ì‚°ëœ ì‘ì—…ë“¤ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
- **fields**: fields ê°ì²´ì— ì‘ì„±ëœ ë°ì´í„° í•„ë“œê°€ í•µì‹¬ì…ë‹ˆë‹¤. ì•„ë˜ì˜ ì˜ˆì‹œì™€ ê°™ì´ ë§ˆí¬ë‹¤ìš´ ê¸€ ìµœìƒë‹¨ì— ê¸€ì—ëŒ€í•œ ì •ë³´ë¥¼ `---`ë¸”ë¡ì— í•„ë“œë¥¼ ì ì–´ì¤˜ì•¼ í•©ë‹ˆë‹¤.

```tsx
---
title: ë¹„ë””ì˜¤ ì—…ë¡œë“œ ê¸°ëŠ¥ ë§Œë“¤ê¸°(App) 4íƒ„
publishedAt: '2023-07-09'
summary: Objective-C? int? long? ìŒ? ì˜ˆ?
category: Dev
---
```

`makeSource` APIë¥¼ ì´ìš©í•´ contentlayerì— schemaì™€ ì†ì„±ì„ ì œê³µí•©ë‹ˆë‹¤. ë§ˆí¬ë‹¤ìš´ íŒŒì¼ì´ ì €ì¥ë˜ì–´ìˆëŠ” Root í´ë” ì…ë‹ˆë‹¤.

```tsx title="contentlayer.config.ts"
import rehypeAutolinkHeadings from 'rehype-autolink-headings';
import rehypeSlug from 'rehype-slug';
import remarkGfm from 'remark-gfm';
import rehypePrettyCode from 'rehype-pretty-code';

export default makeSource({
  contentDirPath: 'posts',
  documentTypes: [Post],
  mdx: {
    remarkPlugins: [remarkGfm],
    rehypePlugins: [
      rehypeSlug,
      [
        rehypePrettyCode,
        {
          theme: 'material-theme-darker',
          onVisitHighlightedLine(node: any) {
            node.properties.className.push('line-highlighted');
          },
          onVisitHighlightedWord(node: any) {
            node.properties.className = ['word-highlighted'];
          },
        },
      ],
      [
        rehypeAutolinkHeadings,
        {
          properties: {
            className: ['anchor'],
          },
        },
      ],
    ],
  },
});
```

- **contentDirPath**: í¬ìŠ¤íŠ¸ê°€ ì¡´ì¬í•˜ëŠ” ë£¨íŠ¸ ë””ë ‰í„°ë¦¬ì…ë‹ˆë‹¤.
- **documentTypes**: í”„ë¡œì íŠ¸ì— í•„ìš”í•œ schema ì •ì˜ë¡œ, defineDocumentTypeìœ¼ë¡œ ë§Œë“  `Post`ë¥¼ ì ìš©í•©ë‹ˆë‹¤.
- **mdx**: `mdxíŒŒì¼`ì„ `HTML`ë¡œ ë³€í™˜í•˜ê¸° ìœ„í•œ í”Œë¡œê·¸ì¸ë“¤ì„ ì¶”ê°€í•©ë‹ˆë‹¤.
  - **rehypeAutolinkHeadings**: `h1 - h6`ì— í•´ë‹¹í•˜ëŠ” íƒœê·¸ì— ìë™ìœ¼ë¡œ ë§í¬ë¥¼ ì£¼ì…ì‹œì¼œì¤ë‹ˆë‹¤.
  - **remarkGfm**: ê¹ƒí—ˆë¸Œ ë§ˆí¬ë‹¤ìš´ ë¬¸ë²•ì— ë§ê²Œ ë³€í™˜í•´ì¤ë‹ˆë‹¤.
  - **rehypeSlug**: í•´ë‹¹ íƒœê·¸ì— ìë™ìœ¼ë¡œ `id`ë¥¼ ì¶”ê°€í•´ì¤ë‹ˆë‹¤.
  - **rehypePrettyCode**: Syntax highlightingì„ ìœ„í•œ í”ŒëŸ¬ê·¸ì¸ì…ë‹ˆë‹¤.

ì´ëŸ¬í•œ ê³¼ì •ìœ¼ë¡œ `contentlayer`ëŠ” ìë™ìœ¼ë¡œ build, dev ê³¼ì •ì—ì„œ ë°ì´í„°ë¥¼ `.contentlayer/generated` ë””ë ‰í† ë¦¬ì•ˆì— JSON í˜•íƒœë¡œ ìƒì„±í•©ë‹ˆë‹¤.

5. **ì‘ì„±í•œ ë§ˆí¬ë‹¤ìš´ ì›¹í˜ì´ì§€ì— ë³´ì—¬ì£¼ê¸°**

<p align='center'>
  <img src='/blog/img/contentlayer-layout.png' width={400} alt='object-null' />
</p>

ê°œë°œì„œë²„ë¥¼ ì‹¤í–‰í•˜ë©´ í”„ë¡œì íŠ¸ Root ê²½ë¡œì— `.contentlayer` í´ë”ê°€ ìƒê¸°ë©°, í•˜ìœ„ í´ë”ì™€ íŒŒì¼ë“¤ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
`generated` í´ë”ì˜ `index.d.ts` íŒŒì¼ì„ í™•ì¸í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ì½”ë“œë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> âœ¨ `index.d.ts`íŒŒì¼ì˜ `allPosts: Post[]`ê°€ í•µì‹¬ì…ë‹ˆë‹¤.

**allPosts**ëŠ” `posts` ë””ë ‰í† ë¦¬ì•ˆì— ë“±ë¡ëœ mdxíŒŒì¼ë“¤ì„ ê°€ì ¸ì˜¤ëŠ” ë°°ì—´ì…ë‹ˆë‹¤.

```tsx title="index.d.ts" {9}
import { Post, DocumentTypes, DataExports } from './types';
import {
  SourceProvideSchemaErrorJSON,
  SourceFetchDataErrorJSON,
} from 'contentlayer/core';

export * from './types';

export declare const allPosts: Post[];

export declare const allDocuments: DocumentTypes[];
```

**Post**ëŠ” `contentlayer.config.ts` ì—ì„œ ë“±ë¡í•œ í•„ë“œë“¤ì„ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì˜ íƒ€ì…ìœ¼ë¡œ ì“¸ìˆ˜ ìˆëŠ” íƒ€ì…ì…ë‹ˆë‹¤.

`allPosts`ëŠ” `Post[]`ë¡œ íƒ€ì…ì´ ì§€ì •ëœ [type-safe](https://contentlayer.dev/docs/concepts/type-safety-e764dcd5)í•œ ë°ì´í„° ì…ë‹ˆë‹¤.
contentlayerê°€ postì˜ íƒ€ì…ì„ ìë™ìœ¼ë¡œ ì„ ì–¸í•˜ë©°, íƒ€ì…ì— ëŒ€í•œ ê±±ì •ì„ ëœì–´ì£¼ê¸° ë•Œë¬¸ì— í¸ë¦¬ì„±ì´ ê·¹ëŒ€í™”ë©ë‹ˆë‹¤. <br/>

```tsx title="types.d.ts"
/** Document types */
export type Post = {
  /** File path relative to `contentDirPath` */
  _id: string;
  _raw: Local.RawDocumentData;
  type: 'Post';
  title: string;
  publishedAt: string;
  summary: string;
  category: string;
  image?: string | undefined;
  /** MDX file body */
  body: MDX;
  slug: string;
};
```

ì´ì œ ëë‚œ ê±°ë‚˜ ë‹¤ë¦„ì—†ìŠµë‹ˆë‹¤. `allPosts`ë¥¼ í•„ìš”ì— ë§ê²Œ ê°€ê³µí•´ë„ ë˜ê³ , ê·¸ëŒ€ë¡œ ì‚¬ìš©í•´ë„ ë©ë‹ˆë‹¤.

```tsx title="post.ts/service"
import { cache } from 'react';
import { Post, allPosts } from 'contentlayer/generated';

export const getAllPosts = cache(async () => {
  return allPosts.sort((a, b) => (a.publishedAt > b.publishedAt ? -1 : 1));
});
// ...
```

#### useMDXComponent

mdxë¥¼ ë Œë”ë§í•˜ê¸° ìœ„í•´ contentlayerê°€ ì œê³µí•˜ëŠ” `useMDXComponent` hooksë¥¼ ì´ìš©í•´ì•¼í•©ë‹ˆë‹¤.<br/>
ì €ëŠ” Vercelì˜ Lee Robinsonì˜ ë¸”ë¡œê·¸ ì½”ë“œë¥¼ ì„¤ëª…í•´ì£¼ëŠ” [ì˜ìƒ](https://www.youtube.com/watch?v=jeBy4vIBqw0)ì„
ì°¸ê³ í•˜ì—¬, `useMDXComponent` hooksë¡œ ë§ˆí¬ë‹¤ìš´ ì½”ë“œë¥¼ HTMLí˜•ì‹ìœ¼ë¡œ ë Œë”ë§í•˜ëŠ” ë¡œì§ì„ ì»¤ìŠ¤í…€í–ˆìŠµë‹ˆë‹¤.

```tsx title="Mdx.tsx"
import { useMDXComponent } from 'next-contentlayer/hooks';
import Image from 'next/image';
import Link from 'next/link';

type Props = {
  code: string;
};

const CustomLink = (props: any) => {
  const href = props.href;

  if (href.startsWith('/')) {
    return (
      <Link href={href} {...props}>
        {props.children}
      </Link>
    );
  }

  if (href.startsWith('#')) {
    return <a {...props} />;
  }

  return <a target='_blank' rel='noopener noreferrer' {...props} />;
};

const RoundedImage = (props: any) => {
  return (
    <Image alt={props.alt} {...props} className='mx-auto rounded-lg' priority />
  );
};

const components = {
  Image: RoundedImage,
  a: CustomLink,
};

export default function Mdx({ code }: Props) {
  const Component = useMDXComponent(code);

  return (
    <article className='prose max-w-3xl break-keep dark:prose-invert prose-h1:text-2xl prose-a:break-all'>
      <Component componets={{ ...components }} />
    </article>
  );
}
```

#### ë¡œì§ ë¶„ë¦¬

í¬ìŠ¤íŠ¸ ê´€ë ¨ ë¡œì§ì„ `service` í´ë”ì—ì„œ ë”°ë¡œ ë¶„ë¦¬í•˜ì—¬ ê´€ë¦¬í–ˆìŠµë‹ˆë‹¤.
ëª¨ë“  í¬ìŠ¤íŠ¸ë¥¼ ì‹œê°„ìˆœìœ¼ë¡œ ê°€ì ¸ì˜¤ëŠ” `getAllPosts`ì™€ ì„ íƒí•œ í¬ìŠ¤íŠ¸ì˜ ë‚´ìš©ê³¼ ì´ì „, ì´í›„ í¬ìŠ¤íŠ¸ ì •ë³´ë¥¼ ì²˜ë¦¬í•˜ëŠ” `getPostData` í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ í•„ìš”ì— ë”°ë¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.

```tsx title="post.ts/service"
import { cache } from 'react';
import { Post, allPosts } from 'contentlayer/generated';

export const getAllPosts = cache(async () => {
  return allPosts.sort((a, b) => (a.publishedAt > b.publishedAt ? -1 : 1));
});

export async function getPostData(fileName: string) {
  const posts = await getAllPosts();
  const post = posts.find((post) => post.slug === fileName) as Post;

  if (!post) throw new Error(`${fileName}ì— í•´ë‹¹í•˜ëŠ” í¬ìŠ¤íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ ğŸ¥²`);

  const index = posts.indexOf(post);
  const next = index > 0 ? posts[index - 1] : null;
  const prev = index < posts.length - 1 ? posts[index + 1] : null;

  return { ...post, next, prev };
}
```

## ë°°ìš´ì  ë° ì„±ê³¼

ì—¬ê¸°ê¹Œì§€ ì™”ë‹¤ë©´ ëŒ€ì¶© ë¸”ë¡œê·¸ì˜ êµ¬ìƒ‰ì€ ê°–ì¶°ì¡Œë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
**contentlayer**ì˜ [ê³µì‹ë¬¸ì„œ](https://contentlayer.dev/docs/environments/nextjs-dcf8e39e)ì™€  
**Lee Robinson**ì˜ [ì½”ë“œ](https://github.com/leerob/leerob.io)ë¥¼ ì°¸ê³ í•˜ë©´ì„œ ì‘ì€ ì´ìŠˆë“¤ë„ í•´ê²°í•´ì™”ìŠµë‹ˆë‹¤.
ë‹¤ë§Œ, ì´ì œ ë” ì¤‘ìš”í•œ **SEO ìµœì í™”** ê³¼ì •ì´ ë‚¨ì•˜ìŠµë‹ˆë‹¤. `Next.js`ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ì™€ë„ ê°™ì€ SEO ìµœì í™”ëŠ” ë‹¤ìŒ í¬ìŠ¤íŒ…ì—ì„œ ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤.

---

## ì°¸ê³ 

- [contentlayer](https://contentlayer.dev/docs/environments/nextjs-dcf8e39e)
- [github.com/leerob/leerob.io](https://github.com/leerob/leerob.io)
- [Code Walkthrough for Next.js 13 / Tailwind CSS / MySQL App!](https://www.youtube.com/watch?v=jeBy4vIBqw0)
